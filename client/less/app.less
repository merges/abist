//Core variables and mixins
@import "./bower_components/bootstrap/less/variables.less";
@import "./bower_components/bootstrap/less/mixins.less";

// Reset
@import "./bower_components/bootstrap/less/normalize.less";
@import "./bower_components/bootstrap/less/print.less";

// Core CSS
@import "./bower_components/bootstrap/less/scaffolding.less";
@import "./bower_components/bootstrap/less/type.less";
@import "./bower_components/bootstrap/less/code.less";
@import "./bower_components/bootstrap/less/grid.less";
@import "./bower_components/bootstrap/less/tables.less";
@import "./bower_components/bootstrap/less/forms.less";
@import "./bower_components/bootstrap/less/buttons.less";

// Components
@import "./bower_components/bootstrap/less/component-animations.less";
@import "./bower_components/bootstrap/less/dropdowns.less";
@import "./bower_components/bootstrap/less/button-groups.less";
@import "./bower_components/bootstrap/less/input-groups.less";
@import "./bower_components/bootstrap/less/navs.less";
@import "./bower_components/bootstrap/less/navbar.less";
@import "./bower_components/bootstrap/less/breadcrumbs.less";
@import "./bower_components/bootstrap/less/pagination.less";
@import "./bower_components/bootstrap/less/pager.less";
@import "./bower_components/bootstrap/less/labels.less";
@import "./bower_components/bootstrap/less/badges.less";
@import "./bower_components/bootstrap/less/jumbotron.less";
@import "./bower_components/bootstrap/less/thumbnails.less";
@import "./bower_components/bootstrap/less/alerts.less";
@import "./bower_components/bootstrap/less/progress-bars.less";
@import "./bower_components/bootstrap/less/media.less";
@import "./bower_components/bootstrap/less/list-group.less";
@import "./bower_components/bootstrap/less/panels.less";
@import "./bower_components/bootstrap/less/wells.less";
@import "./bower_components/bootstrap/less/close.less";
@import "./bower_components/bootstrap/less/glyphicons.less";

// Components w/ JavaScript
@import "./bower_components/bootstrap/less/modals.less";
@import "./bower_components/bootstrap/less/tooltip.less";
@import "./bower_components/bootstrap/less/popovers.less";
@import "./bower_components/bootstrap/less/carousel.less";

// Utility classes
@import "./bower_components/bootstrap/less/utilities.less";
@import "./bower_components/bootstrap/less/responsive-utilities.less";

// Animate.css
@import "animate.min.less";

// Colors

@color-grey-xxxxxxl: #fafafa;
@color-grey-xxxxxl: #f4f4f4;
@color-grey-xxxxl: #e8e8e8;
@color-grey-xxxl: #eee;
@color-grey-xxl: #ddd;
@color-grey-xl: #bbb;
@color-grey-l: #999;
@color-grey-m: #888;
@color-grey-d: #666;
@color-grey-xd: #444;
@color-grey-xxd: #222;

@color-orange: #fe6939;
@color-orange-d: #e05c32;

@color-cost: #78b1db;
@color-cost-l: #ecf6fd;
@color-onset: #8e8ebd;
@color-onset-l: #ecebff;
@color-frequency: #8cb164;
@color-frequency-l: #f0ffe0;
@color-side-effects: #cd773b;
@color-side-effects-l: #f5e8de;
@color-risks: #cab22d;
@color-risks-l: #f7f4dc;

// Broad site styles

html {
	-webkit-font-smoothing: antialiased;

	a {
		cursor: pointer;
	}
}

// Animation

@-webkit-keyframes hue {
  from {
    -webkit-filter: hue-rotate(0deg);
  }
  to {
    -webkit-filter: hue-rotate(-360deg);
  }
}

// Shadows

.shadow-l {
	box-shadow: 0 1px 1px rgba(0,0,0,.3);
}
.shadow-l-right {
  box-shadow: 1px 0 1px rgba(0,0,0,.3);
}

// Header

.header {
	width: 100%;
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	padding: 1em 0 .9em 0;
	background: white;
	z-index: 11;
	.shadow-l;

	h1 {
		font-size: 1.7em;
		font-weight: 300;
		margin: 0;
		padding-left: .5em;

		color: #f35626;
    background-image: -webkit-linear-gradient(92deg,#f35626,#feab3a);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    -webkit-animation: hue 1440s infinite linear;
	}

	@media (max-width: @screen-xs-max) {
		position: absolute;
	}
}

// PtDA demo

@ptda-breakpoint: @screen-xs-max;

.ptda {
	.container-fluid;

	@media (max-width: @ptda-breakpoint) {
		margin-left: -15px;
		margin-right: -15px;
	}

	> section {
		.make-row();
	}
	.preference-controls {
    cursor: pointer;
    user-select: none;
		position: fixed;
		left: -240px;
		width: 300px;
		height: 100%;
    padding-top: 8em;
		text-align: center;
		background: white;
		z-index: 6;
		transition: .25s ease-out;
		.shadow-l-right;

    .animated;
    .bounceInLeft;

		&.open {
			left: 0;
			transform: translateX(0);
		}
		&.closed {
			left: -300px;
			transform: translateX(0);
		}

    @media (max-width: @screen-md-max) {
      font-size: 1.4em;
      left: -340px;
      width: 400px;
      padding-top: 4.5em;

      &.closed {
        left: -400px;
      }
    }

    h2 {
      position: relative;
      margin: 0 -30px 1px 0;
      padding: 8px 5px 10px 15px;
      border-radius: 0 30px 30px 0;
      font-size: 1.4em;
      font-weight: 200;
      text-align: left;
      background: @color-orange;
      color: white;
      .shadow-l-right;

      > strong {
        font-size: 3em;
        position: absolute;
        right: 10px;
        top: -43%;

        @media (max-width: @screen-md-max) {
          font-size: 2.5em;
          top: -47%;
        }
      }
    }
    > section {
      line-height: 1.2;
      padding: 5px 15px 15px 15px;
      color: @color-grey-d;
      font-weight: bold;
      text-align: left;
      background: @color-grey-xxxxxl;

      > .description {
        color: @color-grey-l;
        font-weight: lighter;
        display: block;
      }
    }
    > .preference,
    > section > .option {
      &:hover {
        color: @color-orange;
        background: @color-grey-xxxxxxl;

        > .description {
          color: @color-orange;
        }
      }
      &:active {
        background: @color-grey-xxxxl;
      }
      &.active {
        color: white;
        box-shadow: none;
        background: @color-orange;

        > .description {
          color: rgba(255,255,255,.7);
        }
        &:active {
          background: @color-orange-d;
        }
      }
    }
    > section > .option {
      margin-left: -15px;
      margin-right: -15px;
      padding: .2em 15px;
      font-weight: normal;
      
      &:first-of-type {
        margin-top: 5px;
      }
      &.active {
        font-weight: bolder;
      }

      @media (max-width: @screen-md-max) {
        padding: .6em 15px;
      }
    }
		> section + section {
			border-top: 1px solid white;
		}
    .option + .option {
      border-top: 1px solid @color-grey-xxxxl;
    }
	}
	.card-container {
		.make-sm-column(12);
		padding-top: 4em;
    transition: padding .25s ease-out;

    @media (max-width: @ptda-breakpoint) {
      margin-left: -15px;
      margi-right: -15px;
      padding: 0;
    }
    @media (min-width: @screen-lg-min) {
      &.open {
        padding-left: 350px;
      }
      &.closed {
        padding-left: 0;
      }
    }


		.cards {
			position: relative;

			.ptda-card {
				vertical-align: text-top;
				max-width: 720px;

				@media (max-width: @ptda-breakpoint) {
					width: 100%;
					max-width: 100%;
          margin-bottom: 3em;
				}
			}
		}
	}
	.options {

		.option-header {

			h4 {
				font-size: 1em;
				font-weight: 200;
				color: @color-grey-l;
			}
		}
		h4 {
			font-size: 1.4em;
			font-weight: 700;
			margin: .5em 0 1em 0;
		}
		h5 {
			margin: 0;
			color: @color-grey-l;
			font-size: 11px;
		}
		.option {
			margin-top: 2em;

			&.disabled {
				* {
					color: @color-grey-xl !important;
				}
				.name {
					h2,
					h3 {
						text-decoration: line-through;
					}
				}
			}

			.name {
				padding-top: .5em;
				padding-bottom: .4em;
				color: #427199;
				background: #f4f4f4;
				border-bottom: 1px solid #c2cbd7;

				h2,
				h3 {
					font-size: 1.7em;
					margin: 0;
				}
				h2 {
					font-weight: bolder;
				}
				h3 {
					font-weight: 400;
				}
				small {
					color: @color-grey-l;
					font-size: 14px;
				}
			}
			.side-effects,
			.risks {
				h4 {
					font-size: 14px;
				}
				p {
					margin: 0 0 .4em 0;
				}
			}
			.risks {
				.safe {
					color: #478061;
				}
				.unsure {
					color: #999;
				}
				.unsafe {
					color: #e7956c;
				}
			}
		}
	}
	.mini {
		font-size: 1em;

		.name {
			color: white;
			padding: .4em 0;
			background: @color-grey-xd;

			h2,
			h3 {
				font-size: 1.3em;
				line-height: 1.1em;
				margin: 0;
			}
			h2 {
				font-weight: bolder;
			}
			h3 {
				font-weight: 400;
			}
			small {
				color: @color-grey-l;
				font-size: 1em;
			}
		}
		h3 {
			font-weight: 300;
			font-size: 1em;
			color: #444;
			margin: .6em 0 .2em 0;
		}
		h4 {
			font-size: 1em;
			margin: 0;
		}
		.side-effects {
			h4 {
				span ~ span {
					&:before {
						content: ', ';
					}
				}
			}
		}
		.risks {
			.safe {
				color: #478061;
			}
			.unsure {
				color: #999;
			}
			.unsafe {
				color: #e7956c;
			}
		}
		p {
			margin-bottom: .1em;
		}
	}
	.ptda-card {
		margin: 3em auto 3em auto;
		border-radius: 24px;
		width: 720px;
		background: white;
		box-shadow: 0 4px 12px rgba(0,0,0,.15);
		cursor: pointer;
		user-select: none !important;

		table {
			width: 100%;
			table-layout: fixed;

			h2 {
				border-radius: 24px 24px 0 0;
				margin: 0;
				padding: .5em .5em;
				text-align: center;
				font-size: 2.4em;
				font-weight: lighter;
				color: white;
				text-align: center;
			}
			h3 {
				margin: 1.2em .5em;
				text-align: center;
				font-size: 1.3em;
			}
			h4 {
				font-size: .9em;
				font-weight: bolder;
			}
			h5 {
				font-size: 1.4em;
				font-weight: bolder;
			}
			td {
				width: 180px;
				height: 180px;
				padding: .5em;
				text-align: center;
				vertical-align: top;
				transition: background .07s ease-in-out;

				h4,
				h5 {
					transition: color .07s ease-in-out;
				}
				&.disabled {
					background: #f6f6f6 !important;

					h4,
					h5 {
						text-decoration: line-through;
						color: @color-grey-xl;
					}
				}
				&.selected {
					color: white !important;
					background: @color-grey-xd !important;
				}
			}
			tr {
				&.dosage-form {
					td {
						height: auto;
						border-radius: 0;
						background: none !important;
					}
				}
				&:last-child {
					td {
						&:first-child {
							border-bottom-left-radius: 24px;
						}
						&:last-child {
							border-bottom-right-radius: 24px;
						}
					}
				}
			}
		}

		@media (max-width: @ptda-breakpoint) {
			margin: 0;
			border-radius: 0;
			width: 100%;
      height: 100%;

			table {
				h2,
				td {
					border-radius: 0 !important;
				}
			}
		}

		&.cost {
			h2 {
				background: @color-cost;
			}
			table {
				tr ~ tr {
					border-top: 1px solid white;
				}
				td {
					&:nth-child(odd) {
						color: white;
						background: @color-cost;
					}
					&:nth-child(even) {
						color: @color-cost;
						background: @color-cost-l;
					}
				}
				tr {
					&.dosage-form {
						td {
							color: @color-cost;
						}
					}
				}
			}
		}
		&.onset {
			h2 {
				background: @color-onset;
			}
			table {
				tr ~ tr {
					border-top: 1px solid white;
				}
				td {
					&:nth-child(odd) {
						color: white;
						background: @color-onset;
					}
					&:nth-child(even) {
						color: @color-onset;
						background: @color-onset-l;
					}
				}
				tr {
					&.dosage-form {
						td {
							color: @color-onset;
						}
					}
				}
			}
		}
		&.frequency {
			h2 {
				background: @color-frequency;
			}
			table {
				tr ~ tr {
					border-top: 1px solid white;
				}
				td {
					h5 {
						font-size: 1.2em;
					}
					&:nth-child(odd) {
						color: white;
						background: @color-frequency;
					}
					&:nth-child(even) {
						color: @color-frequency;
						background: @color-frequency-l;
					}
				}
				tr {
					&.dosage-form {
						td {
							color: @color-frequency;
						}
					}
				}
			}
		}
		&.risks {
			h2 {
				background: @color-risks;
			}
			table {
				tr ~ tr {
					border-top: 1px solid white;
				}
				td {
					h5 {
						font-size: 1.2em;

						p {
							margin: 0 0 .1em 0;
						}
						.unsure {
							border-bottom: 1px dotted;

							&:after {
								content: '?';
							}
						}
						.unsafe {
							text-decoration: line-through;
						}
					}
					&:nth-child(odd) {
						color: white;
						background: @color-risks;
					}
					&:nth-child(even) {
						color: @color-risks;
						background: @color-risks-l;
					}
				}
				tr {
					&.dosage-form {
						td {
							color: @color-risks;
						}
					}
				}
			}
		}
		&.side-effects {
			h2 {
				background: @color-side-effects;
			}
			table {
				tr ~ tr {
					border-top: 1px solid white;
				}
				td {
					h5 {
						font-size: 1em;
						font-weight: 300;

						ul {
							list-style-type: none;
							margin: 0;
							padding: 0;

							li {
								margin: 0;
								padding: 0;
							}
						}
					}
					&:nth-child(odd) {
						color: white;
						background: @color-side-effects;
					}
					&:nth-child(even) {
						color: @color-side-effects;
						background: @color-side-effects-l;
					}
				}
				tr {
					&.dosage-form {
						td {
							color: @color-side-effects;
						}
					}
				}
			}
		}
	}
}

// Adverse events

.adverse-events {
	.container-fluid;

	> section {
		.make-row();

		&:first-of-type {
			> div {
				padding-top: 6em;
			}
		}
		> div {
			.make-sm-column(8);
			.make-sm-column-offset(2);
		}
	}
	.chart {
		width: 85%;
	}
}