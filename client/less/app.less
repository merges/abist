//Core variables and mixins
@import "./bower_components/bootstrap/less/variables.less";
@import "./bower_components/bootstrap/less/mixins.less";

// Reset
@import "./bower_components/bootstrap/less/normalize.less";
@import "./bower_components/bootstrap/less/print.less";

// Core CSS
@import "./bower_components/bootstrap/less/scaffolding.less";
@import "./bower_components/bootstrap/less/type.less";
@import "./bower_components/bootstrap/less/code.less";
@import "./bower_components/bootstrap/less/grid.less";
@import "./bower_components/bootstrap/less/tables.less";
@import "./bower_components/bootstrap/less/forms.less";
@import "./bower_components/bootstrap/less/buttons.less";

// Components
@import "./bower_components/bootstrap/less/component-animations.less";
@import "./bower_components/bootstrap/less/dropdowns.less";
@import "./bower_components/bootstrap/less/button-groups.less";
@import "./bower_components/bootstrap/less/input-groups.less";
@import "./bower_components/bootstrap/less/navs.less";
@import "./bower_components/bootstrap/less/navbar.less";
@import "./bower_components/bootstrap/less/breadcrumbs.less";
@import "./bower_components/bootstrap/less/pagination.less";
@import "./bower_components/bootstrap/less/pager.less";
@import "./bower_components/bootstrap/less/labels.less";
@import "./bower_components/bootstrap/less/badges.less";
@import "./bower_components/bootstrap/less/jumbotron.less";
@import "./bower_components/bootstrap/less/thumbnails.less";
@import "./bower_components/bootstrap/less/alerts.less";
@import "./bower_components/bootstrap/less/progress-bars.less";
@import "./bower_components/bootstrap/less/media.less";
@import "./bower_components/bootstrap/less/list-group.less";
@import "./bower_components/bootstrap/less/panels.less";
@import "./bower_components/bootstrap/less/wells.less";
@import "./bower_components/bootstrap/less/close.less";
@import "./bower_components/bootstrap/less/glyphicons.less";

// Components w/ JavaScript
@import "./bower_components/bootstrap/less/modals.less";
@import "./bower_components/bootstrap/less/tooltip.less";
@import "./bower_components/bootstrap/less/popovers.less";
@import "./bower_components/bootstrap/less/carousel.less";

// Utility classes
@import "./bower_components/bootstrap/less/utilities.less";
@import "./bower_components/bootstrap/less/responsive-utilities.less";

// Animate.css
@import "animate.min.less";

// Colors

@color-grey-xxxxxxl: #fafafa;
@color-grey-xxxxxl: #f4f4f4;
@color-grey-xxxxl: #eee;
@color-grey-xxxl: #e8e8e8;
@color-grey-xxl: #ddd;
@color-grey-xl: #bbb;
@color-grey-l: #999;
@color-grey-m: #888;
@color-grey-d: #666;
@color-grey-xd: #444;
@color-grey-xxd: #222;

@color-blue: #3d5adc;

@color-orange: #fe6939;
@color-orange-d: #e05c32;

@color-cost: #78b1db;
@color-cost-l: #ecf6fd;
@color-onset: #8e8ebd;
@color-onset-l: #ecebff;
@color-frequency: #8cb164;
@color-frequency-l: #f0ffe0;
@color-side-effects: #cd773b;
@color-side-effects-l: #f5e8de;
@color-risks: #cab22d;
@color-risks-l: #f7f4dc;

// Shadows

.shadow-l {
	box-shadow: 0 1px 1px rgba(0,0,0,.3);
}
.shadow-l-right {
  box-shadow: 1px 0 1px rgba(0,0,0,.3);
}

// Animations

.animation-hue-text {
  color: #f35626;
  background-image: -webkit-linear-gradient(92deg,#f35626,#feab3a);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  -webkit-animation: hue 1440s infinite linear;
}

.animation-hue-bg {
  background: #f35626;
  background-image: -webkit-linear-gradient(92deg,#f35626,#feab3a);
  -webkit-animation: hue 1440s infinite linear;
}

// Broad site styles

html {
	-webkit-font-smoothing: antialiased;

	a {
		color: @color-blue;
		cursor: pointer;

		&:hover {
			color: @color-blue;
		}
	}
}


// Site-wide navigation

.site-wide-nav {
	position: fixed;
	bottom: 0;
	left: 0;
	right: 0;
	max-height: 2em;
	line-height: 2em;
	padding: 0 15px;
	color: white;
	background: @color-grey-d;
	text-align: right;

	> a,
	> span {
		color: white;
		font-size: 1.3em;
		font-weight: 300;
		display: inline;
		margin-right: .3em;
	}
	a {
		&:hover {
			text-decoration: none;
			color: inherit;
			text-shadow: 0 0 7px rgba(255,255,255,.5);
		}
	}
	.fa {
		margin-bottom: -.1em;
	}
}

// Animation

@-webkit-keyframes hue {
  from {
    -webkit-filter: hue-rotate(0deg);
  }
  to {
    -webkit-filter: hue-rotate(-360deg);
  }
}



// Header

.header {
	width: 100%;
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	padding: 1em 0 .9em 0;
	background: white;
	z-index: 11;
	.shadow-l;

	h1 {
		font-size: 1.7em;
		font-weight: 300;
		margin: 0;
		padding-left: .5em;
    .animation-hue-text;
	}

	// @media (max-width: @screen-xs-max) {
	// 	position: absolute;
	// }
}

// Experiment / index

.experiment {
  .container;
  padding-bottom: 11em;

  .skeleton {
  	.make-sm-column(8);
		.make-sm-column-offset(2);
  }
  > section,
  > nav {
  	.make-row();

  	> section,
  	> h1,
  	> h2 {
  		.skeleton;
  	}
  }

  > nav {
  	> h2 {
  		margin-top: 0;
  		margin-bottom: 0;
  		padding-top: .5em;
  		padding-bottom: 2.5em;
  		font-size: 1.3em;
	    border-top: 3px solid @color-grey-xxxxl;

	    &:hover {
	      background: @color-grey-xxxxxxl;
	    }
	    > p {
	    	color: @color-grey-m;
	    	margin: .5em 0 0 0;
	    	font-weight: 300;
	    	font-size: .8em;
	    }
	  }
	}
  h1 {
  	margin: 0 0 4em 0;
  	font-size: 2em;
  	color: @color-grey-l;
  	font-weight: 200;
  	border-top: 1em solid @color-grey-xxxl;

  	> p {
  		margin-top: 1.5em;
  		font-weight: normal;
  		color: @color-grey-m;
  		font-size: .5em;
  	}
  }
  p {
  	margin: 0;
		line-height: 1.3;

		&.emphasize {
			font-size: 1.3em;
			color: @color-grey-xd;
		}
		&.pull-quote {
			margin-top: 3em;
			margin-bottom: 1em;
			color: @color-orange;
			font-weight: bolder;
			font-size: 1.5em;
			line-height: 1.1;
		}
	}
	p + p,
	p + ul,
	p + ol {
		margin-top: .85em;
	}
	.description {
		background: @color-grey-xxxxxxl;
		padding-top: 1em;
		padding-bottom: 1em;
		padding-right: 15%;
		margin-bottom: 2em;
		color: @color-grey-d;
	}
  img {
  	border-top: 1px solid @color-grey-xxl;
  	border-bottom: 1px solid @color-grey-xxl;
    display: block;
    margin: 1.5em inherit 3em inherit;
  }
}

// PtDA demo

@ptda-breakpoint: @screen-xs-max;

.ptda {
	.container-fluid;

	> section {
		.make-row();
	}
  > .header {
    a.mobile-toggle {
      cursor: pointer;
      display: none;
      position: absolute;
      right: 0;
      top: 0;
      bottom: 0;
      padding: .6em 1em 0 1em;
      background: @color-orange;
      color: white;
      font-size: 1.4em;
      font-weight: 500;
    }
  }
	.preference-controls {
    cursor: pointer;
    user-select: none;
		position: fixed;
		left: -240px;
		width: 300px;
		height: 100%;
    padding-top: 8em;
		text-align: center;
		background: white;
		z-index: 6;
		transition: .25s ease-out;
		.shadow-l-right;

    .animated;
    .bounceInLeft;

		&.open {
			left: 0;
			transform: translateX(0);
		}
		&.closed {
			left: -300px;
			transform: translateX(0);
		}

    h2 {
      position: relative;
      margin: 0 -30px 1px 0;
      padding: 8px 5px 10px 15px;
      border-radius: 0 30px 30px 0;
      font-size: 1.4em;
      font-weight: 200;
      text-align: left;
      background: @color-orange;
      color: white;
      .shadow-l-right;

      > strong {
        font-size: 3em;
        position: absolute;
        right: 10px;
        top: -43%;
      }
    }
    > section {
      line-height: 1.2;
      padding: 5px 15px 15px 15px;
      color: @color-grey-d;
      font-weight: bold;
      text-align: left;
      background: @color-grey-xxxxxl;

      > .description {
        color: @color-grey-l;
        font-weight: lighter;
        display: block;
      }
    }
    > .preference,
    > section > .option {
      color: @color-blue;
      
      @media (min-width: @screen-md-max) {
        &:hover {
          color: @color-orange;
          background: @color-grey-xxxxxxl;

          > .description {
            color: @color-orange;
          }
        }
      }
      &:active {
        background: @color-grey-xxxxl;
      }
      &.active {
        color: white;
        box-shadow: none;
        background: @color-orange;

        > .description {
          color: rgba(255,255,255,.7);
        }
        &:active {
          background: @color-orange-d;
        }
      }
    }
    > section > .option {
      margin-left: -15px;
      margin-right: -15px;
      padding: .2em 15px;
      font-weight: normal;
      
      &:first-of-type {
        margin-top: 5px;
      }
      &.active {
        font-weight: bolder;
      }

      @media (max-width: @screen-md-max) {
        padding: .6em 15px;
      }
    }
		> section + section {
			border-top: 1px solid white;
		}
    .option + .option {
      border-top: 1px solid @color-grey-xxxxl;
    }
	}
	.card-container {
		.make-sm-column(12);
		padding-top: 4em;
    transition: padding .25s ease-out;

    // @media (max-width: @ptda-breakpoint) {
    //   margin-left: -15px;
    //   margin-right: -15px;
    //   padding: 0;
    // }
    @media (min-width: @screen-lg-min) {
      &.open {
        padding-left: 350px;
      }
      &.closed {
        padding-left: 0;
      }
    }

		.cards {
			position: relative;

			.ptda-card {
				vertical-align: text-top;
				max-width: 720px;

				// @media (max-width: @ptda-breakpoint) {
				// 	width: 100%;
				// 	max-width: 100%;
        // 	margin-bottom: 3em;
				// }
			}
		}
	}
	.options {

		.option-header {

			h4 {
				font-size: 1em;
				font-weight: 200;
				color: @color-grey-l;
			}
		}
		h4 {
			font-size: 1.4em;
			font-weight: 700;
			margin: .5em 0 1em 0;
		}
		h5 {
			margin: 0;
			color: @color-grey-l;
			font-size: 11px;
		}
		.option {
			margin-top: 2em;

			&.disabled {
				* {
					color: @color-grey-xl !important;
				}
				.name {
					h2,
					h3 {
						text-decoration: line-through;
					}
				}
			}

			.name {
				padding-top: .5em;
				padding-bottom: .4em;
				color: #427199;
				background: #f4f4f4;
				border-bottom: 1px solid #c2cbd7;

				h2,
				h3 {
					font-size: 1.7em;
					margin: 0;
				}
				h2 {
					font-weight: bolder;
				}
				h3 {
					font-weight: 400;
				}
				small {
					color: @color-grey-l;
					font-size: 14px;
				}
			}
			.side-effects,
			.risks {
				h4 {
					font-size: 14px;
				}
				p {
					margin: 0 0 .4em 0;
				}
			}
			.risks {
				.safe {
					color: #478061;
				}
				.unsure {
					color: #999;
				}
				.unsafe {
					color: #e7956c;
				}
			}
		}
	}
	.mini {
		font-size: 1em;

		.name {
			color: white;
			padding: .4em 0;
			background: @color-grey-xd;

			> h2,
			> h3 {
				display: inline-block;
				font-size: 1.3em;
				line-height: 1.1em;
				margin: 0 0 0 15px;
			}
			h2 {
				font-weight: bolder;
			}
			h3 {
        color: @color-grey-xxxxxl;
				font-weight: 400;
			}
			small {
				color: @color-grey-l;
				font-size: 1em;
			}
		}
		h3 {
			font-weight: 300;
			font-size: 1em;
			color: #444;
			margin: .6em 0 .2em 0;
		}
		h4 {
			font-size: 1em;
			margin: 0;
		}
		.content {
			font-size: 1.3em;
		}
		.side-effects {
			h4 {
				> span + span {
					&:before {
						content: ', ';
					}
				}
			}
		}
		.risks {
			.safe {
				color: #478061;
			}
			.unsure {
				color: #999;
			}
			.unsafe {
				color: #e7956c;
			}
		}
		p {
			margin-bottom: .1em;
		}
	}
	.ptda-card {
		margin: 3em auto 3em auto;
		border-radius: 24px;
		width: 720px;
		background: white;
		box-shadow: 0 4px 12px rgba(0,0,0,.15);
		cursor: pointer;
		user-select: none !important;

		> table {
			width: 100%;
			table-layout: fixed;

			h2 {
				border-radius: 24px 24px 0 0;
				margin: 0;
				padding: .5em .5em;
				text-align: center;
				font-size: 2.4em;
				font-weight: lighter;
				color: white;
				text-align: center;
			}
			h3 {
				margin: 1.2em .5em;
				text-align: center;
				font-size: 1.3em;
			}
			h4 {
				font-size: .9em;
				font-weight: bolder;
			}
			h5 {
				font-size: 1.4em;
				font-weight: bolder;
			}
			td {
				width: 180px;
				height: 180px;
				padding: .5em;
				text-align: center;
				vertical-align: top;
				transition: background .07s ease-in-out;

				h4,
				h5 {
					transition: color .07s ease-in-out;
				}
				&.disabled {
					background: #f6f6f6 !important;

					h4,
					h5,
					h5 > p {
						text-decoration: line-through;
						color: @color-grey-xxl !important;
					}
				}
				&.selected {
					color: white !important;
					background: @color-grey-xd !important;
				}
			}
      td + td {
        border-left: 1px solid white;
      }
			tr {
				&.dosage-form {
          display: none;

					td {
						height: auto;
						border-radius: 0;
						background: none !important;
					}
				}
				&:last-child {
					td {
						&:first-child {
							border-bottom-left-radius: 24px;
						}
						&:last-child {
							border-bottom-right-radius: 24px;
						}
					}
				}
			}
		}

		@media (max-width: @ptda-breakpoint) {
			margin: 0;
			border-radius: 0;
			width: 100%;
      height: 100%;

			table {
				h2,
				td {
					border-radius: 0 !important;
				}
			}
		}

		&.cost {
			h2 {
				background: @color-cost;
			}
			table {
				tr ~ tr {
					border-top: 1px solid white;
				}
				td {
          color: white;
          background: @color-cost;

					// &:nth-child(odd) {
					// 	color: white;
					// 	background: @color-cost;
					// }
					// &:nth-child(even) {
					// 	color: @color-cost;
					// 	background: @color-cost-l;
					// }
				}
				tr {
					&.dosage-form {
            display: none;

						td {
							color: @color-cost;
						}
					}
				}
			}
		}
		&.onset {
			h2 {
				background: @color-onset;
			}
			table {
				tr ~ tr {
					border-top: 1px solid white;
				}
				td {
          color: white;
          background: @color-onset;
					
          // &:nth-child(odd) {
					// 	color: white;
					// 	background: @color-onset;
					// }
					// &:nth-child(even) {
					// 	color: @color-onset;
					// 	background: @color-onset-l;
					// }
				}
				tr {
					&.dosage-form {
            display: none;

						td {
							color: @color-onset;
						}
					}
				}
			}
		}
		&.frequency {
			h2 {
				background: @color-frequency;
			}
			table {
				tr ~ tr {
					border-top: 1px solid white;
				}
				td {
          color: white;
          background: @color-frequency;
					
          h5 {
						font-size: 1.2em;
					}
					// &:nth-child(odd) {
					// 	color: white;
					// 	background: @color-frequency;
					// }
					// &:nth-child(even) {
					// 	color: @color-frequency;
					// 	background: @color-frequency-l;
					// }
				}
				tr {
					&.dosage-form {
            display: none;

						td {
							color: @color-frequency;
						}
					}
				}
			}
		}
		&.risks {
			h2 {
				background: @color-risks;
			}
			table {
				tr ~ tr {
					border-top: 1px solid white;
				}
				td {
          color: white;
          background: @color-risks;
					
          h5 {
          	font-size: 1.2em;

						p {
							margin: 0 0 .1em 0;

							&:after {
								font-weight: 200;
	          		content: ' OK';
	          	}
						}
						.unsure {
							color: rgba(255,255,255,.5);

							&:after {
								font-weight: 500;
								content: '?';
							}
						}
						.unsafe {
              color: #e01d00;
							text-decoration: line-through;

							&:after {
								content: none;
							}
						}
					}
					// &:nth-child(odd) {
					// 	color: white;
					// 	background: @color-risks;
					// }
					// &:nth-child(even) {
					// 	color: @color-risks;
					// 	background: @color-risks-l;
					// }
				}
				tr {
					&.dosage-form {
            display: none;

						td {
							color: @color-risks;
						}
					}
				}
			}
		}
		&.side-effects {
			h2 {
				background: @color-side-effects;
			}
			table {
				tr ~ tr {
					border-top: 1px solid white;
				}
				td {
          color: white;
          background: @color-side-effects;

					h5 {
						font-size: .9em;
						font-weight: 300;

						ul {
							list-style-type: none;
							margin: 0;
							padding: 0;

							li {
								margin: 0 0 .3em 0;
								padding: 0;
							}
						}
					}
					// &:nth-child(odd) {
					// 	color: white;
					// 	background: @color-side-effects;
					// }
					// &:nth-child(even) {
					// 	color: @color-side-effects;
					// 	background: @color-side-effects-l;
					// }
				}
				tr {
					&.dosage-form {
            display: none;

						td {
							color: @color-side-effects;
						}
					}
				}
			}
		}
	}

  &.no-scroll {
    overflow: hidden;
  }
	&.mobile {
    font-size: .75em;

    > .header {
      .mobile-toggle {
        display: block;
      }
    }
    .preference-controls {
      left: 0;
      top: -200%;
      width: 100%;
      height: 100%;
      padding-top: 5em;
      border-bottom: 12px solid @color-orange;
      font-size: 1.3em;
      -webkit-overflow-scrolling: touch;
      overflow-y: scroll;
      .shadow-l;

      h2 {
        display: none;
      }
      &.open {
        top: 0;
        left: 0;
        transform: translateY(0);
      }
      &.closed {
        top: -200%;
        left: 0;
        transform: translateY(0);
      }

    }
    .card-container {
			width: 100%;
      transition: none;
      padding: 6em 0 0 0;

      @media (min-width: @screen-md-min) {
        padding: 6em 30px 0 30px;
      }

			.cards {
				.ptda-card {
					width: 100%;
					max-width: 100%;
          margin-bottom: 5em;

          > table {
            td {
              word-wrap: break-word;
              height: 100px;
            }
          }
				}
			}
		}
	}
}

// Adverse events

.adverse-events {
	.container-fluid;

	> section {
		.make-row();

		&:first-of-type {
			> div {
				padding-top: 6em;
			}
		}
		> div {
			.make-sm-column(8);
			.make-sm-column-offset(2);
		}
	}
	.chart {
		width: 85%;
	}
}